services:
  app:
    class: Symfony\Component\Console\Application
    calls:
      - [ add, ["@LocationCommand"]]
      - [ add, ["@LocationCommandWithZendCache"]]

  LocationCommand:
    class: Nachinius\Command\LocationCommand
    arguments: ["@HtmlGetter"]
  HtmlGetter:
    class: Nachinius\Command\Components\HtmlGetter
    arguments: ["@HttpGetter","@SimpleFSCache"]
  HttpGetter:
    class: Nachinius\Command\Components\HttpGetter
  SimpleFSCache:
    class: Nachinius\Command\Components\SimpleFSCache
    arguments: ["%app.root_dir%/../data","@fs"]
  fs:
    class: Symfony\Component\Filesystem\Filesystem
  
  LocationCommandWithZendCache:
    class: Nachinius\Command\LocationCommand
    arguments: ["@HtmlGetterWithZendFileCache", get2]
  HtmlGetterWithZendFileCache:
    class: Nachinius\Command\Components\HtmlGetter
    arguments: ["@HttpGetter","@zendCacheAdapter"]
  zendCacheAdapter:
    class: Nachinius\Command\Components\ZendCacheAdapter
    arguments: [ "@zendCache"]
  zendCache: 
    class: Zend\Cache\Storage\Adapter\Filesystem
    calls:
      - [ setOptions,  [ {"cache_dir": "%app.root_dir%/../zendCacheData", "key_pattern": /^[a-z0-9_\+\-.]*$/Di } ]]
 